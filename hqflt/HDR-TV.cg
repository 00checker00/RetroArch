struct output
{
  float4 color : COLOR;
};

 output main(uniform sampler2D rubyTexture : TEXUNIT0, float2 texCoord : TEXCOORD0) 
 {   
   float4 rgb = tex2D(rubyTexture, texCoord);
   float4 intens = smoothstep(0.2,0.8,rgb) + normalize(float4(rgb.xyz, 1.0));

   if(fract(texCoord.y * 0.5) > 0.5) intens = rgb * 0.8;
   output OUT;
   OUT.color = intens;
   return OUT;
 }
